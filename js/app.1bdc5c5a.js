(function(t){function e(e){for(var i,n,o=e[0],u=e[1],l=e[2],d=0,m=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);c&&c(e);while(m.length)m.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],i=!0,o=1;o<r.length;o++){var u=r[o];0!==s[u]&&(i=!1)}i&&(a.splice(e--,1),t=n(n.s=r[0]))}return t}var i={},s={app:0},a=[];function n(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"2e31":function(t,e,r){"use strict";r.r(e);var i=r("2b0e");i["default"].config.productionTip=!1},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"container"},[r("Navbar",{on:{signIn:t.signInWithGoogle,signOut:t.signOut}}),r("router-view")],1),r("Footer")],1)},a=[],n=r("260b"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-navbar",{style:{background:"#e9ecef",borderRadius:"0 0 0.3rem 0.3rem"},attrs:{toggleable:"lg",type:"light",variant:"custom"}},[r("router-link",{attrs:{to:"/",custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href;return[r("b-navbar-brand",{attrs:{href:i}},[r("b-avatar",{attrs:{square:"",variant:"transparent",src:t.logoUrl}}),t._v(" WishList ")],1)]}}])}),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[t.user?r("router-link",{attrs:{to:"/user/"+t.user.uid,custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href;return[r("b-nav-item",{attrs:{href:i}},[t._v("Мои желания")])]}}],null,!1,4257712840)}):t._e()],1),r("b-navbar-nav",{staticClass:"ml-auto"},[t.user?r("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v(" "+t._s(t.profile.displayName||t.user.displayName||t.user.email)+" "),r("b-avatar",{staticClass:"ml-1",attrs:{variant:"light",src:t.user.photoURL}})]},proxy:!0}],null,!1,3867602192)},[r("b-dropdown-item",{attrs:{disabled:"",href:"#"}}),r("router-link",{attrs:{to:"/profile/",custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href;return[r("b-dropdown-item",{attrs:{href:i}},[r("b-icon",{attrs:{icon:"person"}}),t._v(" Профиль ")],1)]}}],null,!1,1614293282)}),r("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){return t.$emit("signOut")}}},[r("b-icon",{attrs:{icon:"box-arrow-right"}}),t._v(" Выйти ")],1)],1):t._e(),t.user?t._e():r("b-nav-item",{attrs:{right:""},on:{click:function(e){return t.$emit("signIn")}}},[r("b-icon",{attrs:{icon:"google"}}),t._v(" Войти")],1)],1)],1)],1)},u=[],l={name:"Navbar",data:function(){return{logoUrl:r("cf05")}},computed:{user:function(){return this.$store.state.user},profile:function(){return this.$store.state.profile||{}}}},c=l,d=r("2877"),m=Object(d["a"])(c,o,u,!1,null,"a3f61aae",null),f=m.exports,p=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},b=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",{staticClass:"footer"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"footer-contents"},[r("span",[t._v("© 2021 Vladimir Shefer.")]),r("a",{attrs:{href:"https://github.com/vladimirshefer/wishlist",target:"_blank"}},[t._v(" GitHub ")]),r("a",{attrs:{href:" https://gitter.im/wishlist-app/community",target:"_blank"}},[t._v(" Gitter ")])])])])])])}],h={name:"Footer"},v=h,g=(r("5ef8"),Object(d["a"])(v,p,b,!1,null,"49e7a617",null)),y=g.exports,_={name:"App",components:{Footer:y,Navbar:f},data:function(){return{form:{name:""},items:[]}},computed:{user:function(){return this.$store.state.user}},methods:{signInWithGoogle:function(){var t=new n["a"].auth.GoogleAuthProvider;n["a"].auth().signInWithPopup(t)},signOut:function(){n["a"].auth().signOut()}},beforeMount:function(){var t=this;this.$store.commit("updateFirebaseAuth",n["a"].auth().currentUser),n["a"].auth().onAuthStateChanged((function(e){t.$store.commit("updateFirebaseAuth",e),t.$store.dispatch("reloadUserProfile")}))}},w=_,k=(r("034f"),Object(d["a"])(w,s,a,!1,null,null,null)),C=k.exports,O=r("1da1"),I=(r("96cf"),r("2f62")),x=r("2591");function j(t){return x["a"].firestore().collection(t)}r("e219");var P={wishlistItems:j("wishlistItems"),userProfiles:j("userProfiles")},$={saveProfile:function(t){P.userProfiles.doc(x["a"].auth().currentUser.uid).set(t).catch((function(t){console.error("Could not create or update profile",JSON.stringify(t),t)}))},subscribeOnProfileByUserId:function(t,e){return P.userProfiles.doc(t).onSnapshot((function(t){e(t.data())}),(function(t){console.error(t),e(null)}))},initUserProfile:function(t){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getUserProfileOrNull(t);case 2:if(r.t0=r.sent,null!==r.t0){r.next=6;break}return r.next=6,P.userProfiles.doc(t).set({});case 6:case"end":return r.stop()}}),r)})))()},getUserProfileOrNull:function(t){return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.userProfiles.doc(t).get();case 3:return e.abrupt("return",e.sent.data());case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}};i["default"].use(I["a"]);var N=new I["a"].Store({state:{user:null,profile:null},mutations:{updateFirebaseAuth:function(t,e){t.user=e,e||(this.state.profile=null)},setUserProfile:function(t,e){t.profile=e}},actions:{reloadUserProfile:function(t){return Object(O["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.state.user){e.next=6;break}return e.next=3,$.getUserProfileOrNull(t.state.user.uid);case 3:r=e.sent,e.next=7;break;case 6:r=null;case 7:t.commit("setUserProfile",r);case 8:case"end":return e.stop()}}),e)})))()}}}),E=N,S=r("8c4f"),A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("b-jumbotron",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Мой список желаний")]},proxy:!0},{key:"lead",fn:function(){return[t._v(" Здесь можно поделиться с друзьями идеями подарков для Вас. ")]},proxy:!0}])},[r("hr",{staticClass:"my-4"}),r("p",[t._v(" Список автоматически синхронизируется с облаком. ")]),t.user?r("router-link",{attrs:{to:"/user/"+t.user.uid,custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href;return[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add-item",modifiers:{"modal-add-item":!0}}],attrs:{variant:"primary",href:i}},[t._v("Открыть мой список")])]}}])}):r("b-button",{attrs:{variant:"primary",href:"#"},on:{click:t.signInWithGoogle}},[t._v("Войти")])],1)],1)]),t._m(0),r("Feed",{attrs:{"max-size":10}})],1)},z=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("h3",[t._v("Желания других пользователей:")])])])}],M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},t._l(t.items,(function(t){return r("FeedItem",{key:t.stored.name+t.stored.uid,attrs:{item:t}})})),1)},T=[],U=r("5530"),F=(r("a9e3"),r("d81d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-xs-12 col-md-6"},[r("div",{staticClass:"card mb-2"},[r("div",{staticClass:"card-body"},[r("div",[r("h5",{staticClass:"card-title"},[r("span",[t._v(t._s(t.item.stored.name))])]),r("small",{staticClass:"text-muted"},[t._v(t._s(t.createdAtStr))])]),r("div",[r("b",[t._v(t._s(t.item.stored.cost)+" ₽.")])]),r("div",{staticClass:"mb-2"},t._l(t.item.stored.tags,(function(t){return r("TagBadge",{key:t,attrs:{tag:t}})})),1),t.item.stored.link?r("b-button",{staticClass:"card-button mr-2",attrs:{href:t.item.stored.link,target:"_blank",size:"sm",variant:"primary"}},[t._v(" Перейти в магазин "),r("b-icon",{attrs:{icon:"box-arrow-up-right"}})],1):t._e(),t.user?[t.isMyItem||t.isAdded?r("b-button",{staticClass:"card-button mr-2",attrs:{target:"_blank",size:"sm",variant:"success",disabled:""}},[r("b-icon",{attrs:{icon:"folder-check"}}),t._v(" "+t._s("Добавлено!")+" ")],1):r("b-button",{staticClass:"card-button mr-2",attrs:{target:"_blank",size:"sm",variant:"success"},on:{click:function(e){return t.addToMyList(t.item)}}},[r("b-icon",{attrs:{icon:"folder-plus"}}),t._v(" "+t._s("Тоже хочу!")+" ")],1)]:t._e()],2)])])}),W=[],q={utils:{normalize:function(t){return delete t.id,"undefined"===typeof t.private?t.private=!1:"string"===typeof t.private&&("false"===t.private?t.private=!1:"true"===t.private||t.private?t.private=!0:t.private=!1),t}}},B=r("5a0c"),R=r.n(B),D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-badge",{staticClass:"tag-badge mr-2",style:{cursor:t.clickable?"pointer":"default"},attrs:{pill:"",variant:t.color},on:{click:function(e){return t.$emit("click")}}},[t._v(" "+t._s(t.tag)+" "),r("b-icon",{attrs:{icon:"tag-fill"}})],1)},G=[],L=(r("13d5"),r("a630"),r("3ca3"),{name:"TagBadge",props:{tag:{type:String,required:!0},clickable:{type:Boolean,required:!1,default:!1}},data:function(){return{colors:["primary","secondary","success","danger","warning","info","dark"]}},computed:{hashcode:function(){return Array.from(this.tag).map((function(t){return t.charCodeAt(0)})).reduce((function(t,e){return t+2*e}))},color:function(){return this.colors[this.hashcode%this.colors.length]}}}),J=L,V=(r("e8a2"),Object(d["a"])(J,D,G,!1,null,"7fd9efa8",null)),Y=V.exports,H={name:"FeedItem",components:{TagBadge:Y},props:{item:{type:Object,required:!0}},data:function(){return{isAdded:!1}},computed:{user:function(){return this.$store.state.user},isMyItem:function(){return this.item.stored.uid===this.user.uid},createdAtStr:function(){var t=R()(new Date(1e3*this.item.stored.createdAt.seconds)),e=R()();return t.year()!=e.year()?t.format("hh:mm DD MMM YYYY"):t.date()!=e.date()?t.format("hh:mm DD MMM"):t.format("hh:mm")}},methods:{addToMyList:function(t){this.isAdded||(P.wishlistItems.add(Object(U["a"])(Object(U["a"])({},q.utils.normalize(t.stored)),{},{uid:x["a"].auth().currentUser.uid,createdAt:x["a"].firestore.FieldValue.serverTimestamp()})),this.isAdded=!0)}}},K=H,X=Object(d["a"])(K,F,W,!1,null,"6a7cf0b7",null),Z=X.exports,Q={name:"Feed",components:{FeedItem:Z},props:{maxSize:{type:Number,required:!1}},data:function(){return{items:[]}},methods:{init:function(){var t=this,e=P.wishlistItems.where("private","==",!1);this.maxSize>0&&(e=e.limit(this.maxSize)),e.orderBy("createdAt","desc"),e.get().then((function(e){t.items=e.docs.map((function(t){return{stored:Object(U["a"])({},t.data()),id:t.id,added:!1}}))}))}},beforeMount:function(){this.init()}},tt=Q,et=Object(d["a"])(tt,M,T,!1,null,"6e51ca66",null),rt=et.exports,it={name:"Home",components:{Feed:rt},computed:{user:function(){return this.$store.state.user}},methods:{signInWithGoogle:function(){var t=new x["a"].auth.GoogleAuthProvider;x["a"].auth().signInWithPopup(t)}}},st=it,at=Object(d["a"])(st,A,z,!1,null,"0d202ddd",null),nt=at.exports,ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("UserWishlist",{attrs:{editable:t.isMyPage,"user-id":t.userId}}),t.isMyPage?r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("h4",{staticClass:"mt-3"},[t._v("Добавить желание:")]),r("ItemEditForm",{attrs:{item:{}},on:{submit:function(e){return t.addWishlistItem(e)}}})],1)]):t._e()],1)},ut=[],lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[0===t.items.length?r("div",{staticClass:"col-12"},[r("div",{staticClass:"card wishlist-item"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"wishlist-item-card"}),r("h3",{staticClass:"card-title"},[t._v(" Все желания уже выполнены? ")]),r("h5",[t._v("В этом списке ничего нет :)")]),t.editable?t._e():r("b-button",{staticClass:"mt-2",attrs:{variant:"primary",href:"/"}},[t._v("На главную")])],1)])]):t._e(),t._l(t.items,(function(e){return r("div",{key:e.name,staticClass:"col-12"},[r("ItemCardWrapper",{attrs:{item:e,editable:t.editable},on:{remove:function(r){return t.removeWishlistItem(e.id)},update:function(e){return t.editItem(e)}}})],1)}))],2)},ct=[],dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-1"},[r("ItemCard",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing,expression:"!isEditing"}],attrs:{item:t.item,editable:t.editable},on:{remove:function(e){return t.$emit("remove",e)},edit:function(e){t.isEditing=!0}}}),t.isEditing?r("ItemEditForm",{attrs:{item:t.item},on:{submit:function(e){t.$emit("update",e),t.isEditing=!1},cancel:function(e){t.isEditing=!1}}}):t._e()],1)},mt=[],ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("b-form",{on:{submit:function(e){return t.submit(e)},reset:t.cancel}},[r("b-form-group",{attrs:{id:"input-group-name",label:"Что я хочу:","label-for":"input-name"}},[r("b-form-input",{attrs:{id:"input-name",placeholder:"Новая куртка",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("b-form-group",{attrs:{id:"input-group-cost",label:"Стоимость:","label-for":"input-cost",description:""}},[r("b-form-input",{attrs:{id:"input-cost",type:"number",min:"0",step:"0.01",placeholder:"10000.0",required:""},model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",e)},expression:"form.cost"}})],1),r("b-form-group",{attrs:{id:"input-group-link",label:"Ссылка на товар:","label-for":"input-link"}},[r("b-form-input",{attrs:{id:"input-link",type:"url",placeholder:"https://..."},model:{value:t.form.link,callback:function(e){t.$set(t.form,"link",e)},expression:"form.link"}})],1),r("b-form-group",{attrs:{id:"input-group-tags",label:"Теги:","label-for":"input-tags"}},[r("div",{staticClass:"mb-2"},t._l(t.form.tags,(function(e){return r("TagBadge",{key:e,attrs:{tag:e,clickable:""},on:{click:function(r){return t.removeTag(e)}}})})),1),r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Одежда"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTag(e)}},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.addTag}},[t._v("Добавить")])],1)],1),r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"primary"}},[t._v("Сохранить")]),r("b-button",{staticClass:"mr-1",attrs:{type:"reset",size:"sm",variant:"danger"}},[t._v("Отмена")])],1)],1)])},pt=[],bt=(r("caad"),r("2532"),r("4de4"),{name:"ItemEditForm",components:{TagBadge:Y},props:{item:{type:Object,required:!0}},data:function(){return{form:{name:"",cost:0,link:"",tags:[]},tag:""}},methods:{reset:function(){this.form=JSON.parse(JSON.stringify(this.item))},submit:function(t){t.preventDefault(),t.stopPropagation(),this.$emit("submit",this.getResultingObject()),this.reset()},cancel:function(){this.$emit("cancel"),this.reset()},getResultingObject:function(){return Object.assign({},this.item,this.form)},addTag:function(t){t.preventDefault(),this.form.tags||(this.form.tags=[]),this.tag&&!this.form.tags.includes(this.tag)&&this.form.tags.push(this.tag),this.tag=""},removeTag:function(t){this.form.tags=this.form.tags.filter((function(e){return e!==t}))}},created:function(){this.reset()}}),ht=bt,vt=Object(d["a"])(ht,ft,pt,!1,null,null,null),gt=vt.exports,yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"wishlist-item-card"}),r("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.item.name)+" "),t.editable?r("b-dropdown",{attrs:{variant:"light",size:"sm"}},[r("b-dropdown-item",{on:{click:function(e){return t.$emit("edit")}}},[t._v("Изменить")]),r("b-dropdown-item",{on:{click:t.tryRemove}},[t._v("Удалить")])],1):t._e()],1),r("p",[r("b",[t._v(t._s(t.item.cost)+" ₽.")])]),r("div",{staticClass:"mb-2"},t._l(t.item.tags,(function(t){return r("TagBadge",{key:t,attrs:{tag:t}})})),1),t.item.link?r("b-button",{staticClass:"card-button",attrs:{href:t.item.link,target:"_blank",size:"sm",variant:"primary"}},[t._v(" Открыть "),r("b-icon",{attrs:{icon:"box-arrow-up-right"}})],1):r("b-button",{staticClass:"card-button",attrs:{href:t.searchLink,target:"_blank",size:"sm",variant:"primary"}},[r("b-icon",{attrs:{icon:"google"}}),t._v(" Поиск ")],1)],1)])},_t=[],wt=(r("b0c0"),{name:"ItemCard",components:{TagBadge:Y},props:{item:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!1}},methods:{tryRemove:function(){confirm("Удалить желание?")&&this.$emit("remove")}},computed:{searchLink:function(){return"https://www.google.com/search?q="+this.item.name}}}),kt=wt,Ct=Object(d["a"])(kt,yt,_t,!1,null,null,null),Ot=Ct.exports,It={name:"ItemCardWrapper",components:{ItemCard:Ot,ItemEditForm:gt},props:{item:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!1}},data:function(){return{isEditing:!1}}},xt=It,jt=Object(d["a"])(xt,dt,mt,!1,null,"16e56db4",null),Pt=jt.exports,$t={name:"UserWishlist",components:{ItemCardWrapper:Pt},props:{userId:{type:String,required:!1},editable:{type:Boolean,required:!1,default:!1}},data:function(){return{items:[],unsubscribe:function(){}}},methods:{removeWishlistItem:function(t){this.editable&&P.wishlistItems.doc(t).delete()},editItem:function(t){P.wishlistItems.doc(t.id).update(q.utils.normalize(t))},init:function(t){var e=this;if(this.unsubscribe(),null!=t){var r=P.wishlistItems.where("uid","==",t);this.editable||(r=r.where("private","==",!1)),this.unsubscribe=r.onSnapshot((function(t){e.items=t.docs.map((function(t){return Object(U["a"])(Object(U["a"])({},t.data()),{},{id:t.id})}))}))}else this.items=[]}},watch:{userId:function(t){this.init(t)},editable:function(){this.init(this.userId)}},beforeMount:function(){this.init(this.userId)}},Nt=$t,Et=Object(d["a"])(Nt,lt,ct,!1,null,"0e8831b1",null),St=Et.exports,At={name:"User",components:{ItemEditForm:gt,UserWishlist:St},computed:{user:function(){return this.$store.state.user},userId:function(){return this.$route.params.userId},isMyPage:function(){return this.user&&this.user.uid===this.userId}},methods:{addWishlistItem:function(t){P.wishlistItems.add(Object(U["a"])(Object(U["a"])({},q.utils.normalize(t)),{},{uid:this.user.uid,createdAt:x["a"].firestore.FieldValue.serverTimestamp()}))}}},zt=At,Mt=Object(d["a"])(zt,ot,ut,!1,null,"79367871",null),Tt=Mt.exports,Ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return this.user?r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("b-form",{on:{submit:function(e){return t.submit(e)},reset:function(e){return t.reset(e)}}},[r("b-form-group",{attrs:{id:"input-group-display-name",label:"Отображаемое имя","label-for":"input-display-name"}},[r("b-form-input",{attrs:{id:"input-display-name",required:""},model:{value:t.displayName,callback:function(e){t.displayName=e},expression:"displayName"}})],1),r("b-form-group",{attrs:{id:"input-group-about",label:"О себе:","label-for":"input-about"}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.about,expression:"about"}],staticClass:"form-control",attrs:{id:"input-about",rows:"3"},domProps:{value:t.about},on:{input:function(e){e.target.composing||(t.about=e.target.value)}}})]),r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"primary"}},[t._v("Сохранить")]),r("b-button",{staticClass:"mr-1",attrs:{type:"reset",size:"sm",variant:"danger"}},[t._v("Сбросить")])],1)],1)])])]):t._e()},Ft=[],Wt={name:"Profile",data:function(){return{form:{displayName:null,label:null,about:null}}},computed:{user:function(){return this.$store.state.user},profile:function(){return this.$store.state.profile},storedProfile:function(){return{displayName:(this.profile?this.profile.displayName:null)||(this.user?this.user.displayName:null),about:this.profile?this.profile.about:null}},displayName:{get:function(){return this.form.displayName||this.storedProfile.displayName||""},set:function(t){this.form.displayName=t}},about:{get:function(){return null!=this.form.about?this.form.about:this.profile?this.storedProfile.about:""},set:function(t){this.storedProfile.about!==t?this.form.about=t:this.form.about=null}}},methods:{submit:function(t){t.preventDefault(),t.stopPropagation(),$.saveProfile({displayName:this.displayName,about:this.about}),this.$store.dispatch("reloadUserProfile")},reset:function(t){t.preventDefault(),t.stopPropagation(),this.form=Object(U["a"])({},this.storedProfile)}}},qt=Wt,Bt=Object(d["a"])(qt,Ut,Ft,!1,null,"1a1ae7dc",null),Rt=Bt.exports;i["default"].use(S["a"]);var Dt=[{path:"/",component:nt},{path:"/user/:userId",component:Tt},{path:"/profile",component:Rt}],Gt=new S["a"]({routes:Dt}),Lt=Gt;r("e219"),r("c417"),r("2e31"),r("70b9"),new i["default"]({render:function(t){return t(C)},router:Lt,store:E}).$mount("#app")},"5ef8":function(t,e,r){"use strict";r("a335")},"70b9":function(t,e,r){"use strict";r.r(e);var i=r("5a0c"),s=r.n(i);r("276b"),s.a.locale("ru")},"85ec":function(t,e,r){},a335:function(t,e,r){},b68e:function(t,e,r){},c417:function(t,e,r){"use strict";r.r(e);var i=r("2b0e"),s=r("5f5b"),a=r("b1e0");r("f9e3"),r("2dd8");i["default"].use(s["a"]),i["default"].use(a["a"])},cf05:function(t,e,r){t.exports=r.p+"img/logo.822882ee.png"},e219:function(t,e,r){"use strict";r.r(e);var i=r("2591"),s=(r("ea7b"),r("e71f"),{apiKey:"AIzaSyACtgZ3RVsV4asdNWLtlbTtbrb-BocsXjk",authDomain:"wishlist-for-friends.firebaseapp.com",projectId:"wishlist-for-friends",storageBucket:"wishlist-for-friends.appspot.com",messagingSenderId:"491027786294",appId:"1:491027786294:web:ed36804351917d5052c697"});i["a"].initializeApp(s)},e8a2:function(t,e,r){"use strict";r("b68e")}});
//# sourceMappingURL=app.1bdc5c5a.js.map